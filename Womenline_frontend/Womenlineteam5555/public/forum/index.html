<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WomenLine â€“ Discussions</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --primary: #7b3f3f;
      --primary-2: #a05252;
      --accent: #f4bcbc;
      --card: #ffffff;
      --bg: #f8f8f8;
      --text: #333333;
      --muted: #666666;
      --shadow: 0 8px 24px rgba(123, 63, 63, 0.12);
      --shadow-strong: 0 12px 32px rgba(123, 63, 63, 0.18);
    }
    body { background: var(--bg); color: var(--text); }
    .wl-header { background: linear-gradient(135deg, var(--primary), var(--primary-2)); box-shadow: var(--shadow); }
    .wl-badge { background: #ffe066; color: var(--primary); border-radius: 9999px; padding: 0.25rem 0.6rem; font-weight: 700; font-size: 0.85rem; }
    .wl-btn { background: #fff; color: var(--primary); border: 1px solid rgba(255,255,255,0.4); transition: all .2s; }
    .wl-btn:hover { background: var(--accent); color: var(--primary); }
    .wl-card { background: var(--card); border: 1px solid #ecdede; border-radius: 16px; box-shadow: var(--shadow); }
    .wl-card:hover { box-shadow: var(--shadow-strong); }
    .wl-link { color: var(--primary); }
    .wl-link:hover { color: var(--primary-2); }
    .wl-modal-bg { background: rgba(0,0,0,0.45); }
    .wl-input { border: 2px solid #e9d1d1; border-radius: 10px; padding: .6rem .8rem; outline: none; }
    .wl-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(123,63,63,0.12); }
    .wl-primary { background: var(--primary); color: #fff; border-radius: 10px; padding: .6rem .9rem; transition: background .2s; }
    .wl-primary:hover { background: var(--primary-2); }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- HEADER -->
  <header class="wl-header text-white">
    <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
      <h1 class="text-xl sm:text-2xl font-bold tracking-wide">WomenLine Discussions</h1>
      <div class="flex items-center gap-3">
        <span class="hidden sm:inline wl-badge">ðŸª™ <span id="coinCount">0</span></span>
        <select id="languageSelect" class="bg-white text-[var(--primary)] px-2 py-1 rounded-md text-sm border border-white/40">
          <option value="en">English</option>
          <option value="hi">Hindi</option>
          <option value="ta">Tamil</option>
          <option value="ml">Malayalam</option>
        </select>
        <button class="wl-btn px-3 py-2 rounded-md text-sm font-semibold" onclick="openPostModal()">+ New Discussion</button>
      </div>
    </div>
  </header>

  <!-- CONTENT -->
  <main class="flex-grow w-full">
    <div class="max-w-3xl mx-auto px-4 py-6 space-y-4" id="posts"></div>
  </main>

  <!-- CREATE POST MODAL -->
  <div id="postModal" class="fixed inset-0 wl-modal-bg hidden items-center justify-center p-4">
    <div class="wl-card w-full max-w-lg relative p-5">
      <button onclick="closePostModal()" class="absolute top-3 right-4 text-gray-500 text-xl">&times;</button>
      <h2 class="text-lg font-bold mb-4 text-[var(--primary)]">Start a Discussion</h2>
      <input type="text" id="postTitle" placeholder="Discussion Title" class="w-full wl-input mb-3" />
      <textarea id="postContent" placeholder="Write your message..." rows="4" class="w-full wl-input mb-3"></textarea>
      <label class="flex items-center mb-3 text-sm text-[var(--muted)]"><input type="checkbox" id="anonymousPost" class="mr-2"> Post as Anonymous</label>
      <button onclick="submitPost()" class="w-full wl-primary font-semibold">Post</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="text-center py-4 text-[var(--muted)] text-sm">
    WomenLine Â© 2025 â€¢ A safe and supportive space for meaningful discussions
  </footer>

  <script>
    let posts = [
      { id: 1, title: 'Support during stressful times', content: 'How do you cope with anxiety?', author: genAnonId(), ai: 'Checked by AI', replies: [] }
    ];

    function genAnonId() { return 'User' + Math.floor(Math.random() * 9000 + 1000); }

    function renderPosts() {
      const container = document.getElementById('posts');
      container.innerHTML = '';
      posts.forEach(post => {
        let repliesHTML = '';
        post.replies.forEach(reply => {
          repliesHTML += `<div class='ml-4 mt-2 p-2 border-l-2 border-[var(--accent)] text-sm'><strong class='text-[var(--primary)]'>${reply.author}:</strong> ${reply.content}</div>`;
        });
        container.innerHTML += `
          <div class="wl-card p-4">
            <div class="flex justify-between items-center mb-2">
              <span class="text-xs text-green-700">${post.ai}</span>
              <button onclick="reportPost(${post.id})" class="text-xs text-red-600 hover:text-red-700">Report</button>
            </div>
            <h3 class="font-semibold text-[var(--primary)]">${post.title}</h3>
            <p class="text-sm text-[var(--muted)] mt-1">Posted by ${post.author}</p>
            <p class="mt-3 leading-relaxed">${post.content}</p>
            <div class="flex justify-between mt-4 text-sm">
              <button onclick="showReplyBox(${post.id})" class="wl-link">Reply</button>
              <span>${post.replies.length} Replies</span>
            </div>
            <div id="replyBox-${post.id}" class="hidden mt-3">
              <input type="text" id="replyInput-${post.id}" placeholder="Write your reply..." class="w-full wl-input mb-2 text-sm">
              <button onclick="submitReply(${post.id})" class="wl-primary text-sm">Post Reply</button>
            </div>
            ${repliesHTML}
          </div>`;
      });
    }

    function openPostModal() { const m = document.getElementById('postModal'); m.classList.remove('hidden'); m.classList.add('flex'); }
    function closePostModal() { document.getElementById('postModal').classList.add('hidden'); }

    function submitPost() {
      const title = document.getElementById('postTitle').value.trim();
      const content = document.getElementById('postContent').value.trim();
      const anonymous = document.getElementById('anonymousPost').checked;
      if (title && content) {
        posts.unshift({ id: Date.now(), title, content, author: anonymous ? 'Anonymous' : genAnonId(), ai: 'Checked by AI', replies: [] });
        closePostModal();
        renderPosts();
      }
    }

    function showReplyBox(id) { document.getElementById(`replyBox-${id}`).classList.toggle('hidden'); }

    function submitReply(id) {
      const input = document.getElementById(`replyInput-${id}`);
      const replyText = input.value.trim();
      if (replyText) {
        const post = posts.find(p => p.id === id);
        post.replies.push({ author: genAnonId(), content: replyText });
        renderPosts();
      }
    }

    function reportPost() { alert('Thanks for reporting. Our Team will review this.'); }

    renderPosts();
  </script>
</body>
</html>
